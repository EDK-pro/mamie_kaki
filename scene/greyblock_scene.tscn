[gd_scene load_steps=42 format=3 uid="uid://dkgpo83vsvf6n"]

[ext_resource type="PackedScene" uid="uid://bwjim2twt32uf" path="res://scene/mamie.tscn" id="1_78l3u"]
[ext_resource type="Script" path="res://script/Script_scene_greyblock.gd" id="1_a1d8j"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="2_m0kki"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="3_l1xyf"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="3_nbc5r"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="4_eic3h"]
[ext_resource type="PackedScene" uid="uid://dscq3fjslpkxc" path="res://asset/asset_visuel/Nintendo DS.glb" id="7_agyvh"]
[ext_resource type="PackedScene" uid="uid://dsl2xr4e1sr2" path="res://asset/asset_visuel/table_chaise.glb" id="7_mlwqy"]
[ext_resource type="PackedScene" uid="uid://dw3vpvlrsjxfs" path="res://scene/objets_base.tscn" id="8_mqrtj"]
[ext_resource type="PackedScene" uid="uid://cc1jveh1jjmrc" path="res://scene/Texte_Souvenir.tscn" id="10_mlifd"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_puydc"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_8hsvg"]
sky_material = SubResource("ProceduralSkyMaterial_puydc")

[sub_resource type="Environment" id="Environment_pnk46"]
background_mode = 2
sky = SubResource("Sky_8hsvg")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_avpkt"]

[sub_resource type="BoxMesh" id="BoxMesh_5rbto"]
material = SubResource("StandardMaterial3D_avpkt")
size = Vector3(25, 25, 0.5)

[sub_resource type="BoxShape3D" id="BoxShape3D_mfogb"]
size = Vector3(25, 25, 0.5)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_3762b"]

[sub_resource type="BoxMesh" id="BoxMesh_k43oc"]
material = SubResource("StandardMaterial3D_3762b")
size = Vector3(20, 0.3, 15)

[sub_resource type="BoxShape3D" id="BoxShape3D_f4sxw"]
size = Vector3(20, 0.3, 15)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5ijv2"]

[sub_resource type="BoxMesh" id="BoxMesh_tsk8i"]
material = SubResource("StandardMaterial3D_5ijv2")
size = Vector3(20, 9, 0.3)

[sub_resource type="FastNoiseLite" id="FastNoiseLite_1wuyl"]
noise_type = 3
frequency = 0.095
fractal_octaves = 10
fractal_gain = 5.0

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_bgoc7"]
noise = SubResource("FastNoiseLite_1wuyl")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_mwkcx"]
albedo_color = Color(0.2, 0.270588, 0.109804, 1)
albedo_texture = SubResource("NoiseTexture2D_bgoc7")

[sub_resource type="BoxMesh" id="BoxMesh_x51ep"]
material = SubResource("StandardMaterial3D_mwkcx")
size = Vector3(20, 0.3, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_6flvy"]
size = Vector3(20, 0.3, 20)

[sub_resource type="BoxShape3D" id="BoxShape3D_ody2o"]
size = Vector3(8, 0.2, 8)

[sub_resource type="BoxShape3D" id="BoxShape3D_faoug"]
size = Vector3(20, 0.2, 8)

[sub_resource type="BoxShape3D" id="BoxShape3D_g5nvo"]
size = Vector3(8, 0.2, 8)

[sub_resource type="Resource" id="Resource_q88rd"]
script = ExtResource("3_l1xyf")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_lhcdi"]
script = ExtResource("4_eic3h")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[sub_resource type="Resource" id="Resource_7crwf"]
script = ExtResource("3_l1xyf")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_85idd"]
script = ExtResource("4_eic3h")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[sub_resource type="Resource" id="Resource_qlif0"]
script = ExtResource("3_l1xyf")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_1gak3"]
script = ExtResource("4_eic3h")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[sub_resource type="Resource" id="Resource_ngual"]
script = ExtResource("3_l1xyf")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_uebgi"]
script = ExtResource("4_eic3h")
cull_mask = 1048575
h_offset = 0.0
v_offset = 0.0
projection = 0
fov = 75.0
size = 1.0
frustum_offset = Vector2(0, 0)
near = 0.05
far = 4000.0

[sub_resource type="BoxMesh" id="BoxMesh_p1o7i"]
size = Vector3(20, 1, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_2p1pb"]
size = Vector3(20, 1, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_87xni"]
size = Vector3(6, 6, 0.5)

[sub_resource type="BoxMesh" id="BoxMesh_y5t1p"]
size = Vector3(6, 6, 0.5)

[node name="Greyblock_scene" type="Node3D" node_paths=PackedStringArray("pcam_milieu", "pcam_gauche", "pcam_droite", "cam_proche", "mamie")]
script = ExtResource("1_a1d8j")
pcam_milieu = NodePath("PhantomCameraMilieu")
pcam_gauche = NodePath("PhantomCameraGauche")
pcam_droite = NodePath("PhantomCameraDroite")
cam_proche = NodePath("Scene_souvenir")
mamie = NodePath("Mamie")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_pnk46")

[node name="StaticBody3D2" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.741642, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.29952, 0, -10)
mesh = SubResource("BoxMesh_5rbto")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2/MeshInstance3D"]
shape = SubResource("BoxShape3D_mfogb")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 10)
visible = false
mesh = SubResource("BoxMesh_5rbto")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 10, 0, 0.059)
mesh = SubResource("BoxMesh_5rbto")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -10, 0, -0.029)
mesh = SubResource("BoxMesh_5rbto")
skeleton = NodePath("../MeshInstance3D2")

[node name="MeshInstance3D6" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 0.968152, 0.250363, 0, -0.250363, 0.968152, 1.15509, 3.7955, -2.85374)
mesh = SubResource("BoxMesh_k43oc")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2/MeshInstance3D6"]
shape = SubResource("BoxShape3D_f4sxw")

[node name="MeshInstance3D5" type="MeshInstance3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 0.573462, 0.819232, 0, -0.819232, 0.573462, 0, 4.03618, 6.99729)
mesh = SubResource("BoxMesh_tsk8i")

[node name="StaticBody3D" type="StaticBody3D" parent="."]

[node name="MeshInstance3D" type="MeshInstance3D" parent="StaticBody3D"]
mesh = SubResource("BoxMesh_x51ep")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("BoxShape3D_6flvy")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.68962, 0.724172, 0, -0.724172, 0.68962, 0, 15.2537, 0)
light_color = Color(1, 0.654902, 0.270588, 1)
light_energy = 16.0
light_angular_distance = 8.49
shadow_enabled = true
shadow_bias = 0.3

[node name="Mamie" parent="." instance=ExtResource("1_78l3u")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.13238, 0)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.960648, 0.277767, 0, -0.277767, 0.960648, 0, 2.96181, 8.4755)

[node name="PhantomCameraHost" type="Node" parent="Camera3D"]
script = ExtResource("3_nbc5r")

[node name="Area_trigger" type="Node" parent="."]

[node name="Droite" type="Area3D" parent="Area_trigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.46617, 0.643837, 7.65411)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area_trigger/Droite"]
shape = SubResource("BoxShape3D_ody2o")

[node name="Milieu" type="Area3D" parent="Area_trigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.450485, -5.89841)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area_trigger/Milieu"]
shape = SubResource("BoxShape3D_faoug")

[node name="Gauche" type="Area3D" parent="Area_trigger"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.04383, 1.27588, 6.66167)
collision_layer = 2
collision_mask = 2

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area_trigger/Gauche"]
shape = SubResource("BoxShape3D_g5nvo")

[node name="PhantomCameraMilieu" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.960648, 0.277767, 0, -0.277767, 0.960648, 0, 2.96181, 8.4755)
script = ExtResource("2_m0kki")
priority = 1
tween_resource = SubResource("Resource_q88rd")
camera_3d_resource = SubResource("Resource_lhcdi")

[node name="PhantomCameraGauche" type="Node3D" parent="."]
transform = Transform3D(-0.760587, 0.250369, -0.599018, -0.0104937, 0.917789, 0.396929, 0.649151, 0.308185, -0.695432, 1.42553, 2.74238, 1.3755)
script = ExtResource("2_m0kki")
tween_resource = SubResource("Resource_7crwf")
camera_3d_resource = SubResource("Resource_85idd")

[node name="PhantomCameraDroite" type="Node3D" parent="."]
transform = Transform3D(-0.736944, -0.355776, 0.57475, 0.0125952, 0.842904, 0.537916, -0.675836, 0.403653, -0.616692, -1.78635, 2.31766, 1.76276)
script = ExtResource("2_m0kki")
tween_resource = SubResource("Resource_qlif0")
camera_3d_resource = SubResource("Resource_1gak3")

[node name="Nintendo DS" parent="." instance=ExtResource("7_agyvh")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.93668, 0.15, 8.98242)

[node name="Objet_briilance" parent="Nintendo DS" instance=ExtResource("8_mqrtj")]

[node name="table_chaise" parent="." instance=ExtResource("7_mlwqy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.02232, 0.15, 7.91369)

[node name="Objet_briilance" parent="table_chaise" instance=ExtResource("8_mqrtj")]

[node name="Control" parent="." instance=ExtResource("10_mlifd")]
mouse_filter = 2

[node name="Scene_souvenir" type="Node3D" parent="." node_paths=PackedStringArray("follow_target")]
transform = Transform3D(0.999999, 0, 0, 0, 1, 0, 0, 0, 0.999999, 0, 2.13238, 2)
script = ExtResource("2_m0kki")
follow_mode = 6
follow_target = NodePath("../Mamie")
tween_resource = SubResource("Resource_ngual")
camera_3d_resource = SubResource("Resource_uebgi")
follow_offset = Vector3(0, 1, 0)
follow_distance = 2.0
spring_length = 2.0

[node name="Fenetre" type="StaticBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.2683, 0)

[node name="MeshInstance3D" type="MeshInstance3D" parent="Fenetre"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -2.799, 10)
mesh = SubResource("BoxMesh_p1o7i")

[node name="MeshInstance3D2" type="MeshInstance3D" parent="Fenetre"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.259756, 10)
mesh = SubResource("BoxMesh_2p1pb")

[node name="MeshInstance3D3" type="MeshInstance3D" parent="Fenetre"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.614, 0, 10)
mesh = SubResource("BoxMesh_87xni")

[node name="MeshInstance3D4" type="MeshInstance3D" parent="Fenetre"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -7.6093, 0, 10)
mesh = SubResource("BoxMesh_y5t1p")

[connection signal="body_entered" from="Area_trigger/Droite" to="." method="_on_droite_body_entered"]
[connection signal="body_entered" from="Area_trigger/Milieu" to="." method="_on_milieu_body_entered"]
[connection signal="body_entered" from="Area_trigger/Gauche" to="." method="_on_gauche_body_entered"]
